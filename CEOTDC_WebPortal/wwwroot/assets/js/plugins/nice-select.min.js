!function(n){"use strict";n.fn.EdumallNiceSelect=function(e){var i="focused",c="selected";return this.each(function(){var s=n(this),e=n(this).data("select"),t="",e=e.fieldLabel?'<span class="label">'+e.fieldLabel+"</span>":"",a=n('<div class="edumall-nice-select-current">'+e+'<span class="value"></span></div>');s.children("option").each(function(){var e="item";n(this).is(":selected")&&(a.find(".value").text(n(this).text()),e+=" "+c),t+='<li class="'+e+'" data-value="'+n(this).val()+'">'+n(this).text()+"</li>"});var t='<ul class="edumall-nice-select">'+t+"</ul>",l=n('<div class="edumall-nice-select-wrap"></div>');l.append(a).append(t),a.on("click",function(){l.addClass(i)}),l.on("click","li",function(){var e;l.removeClass(i),n(this).hasClass(c)||(n(this).siblings().removeClass(c),n(this).addClass(c),e=n(this).data("value"),a.find(".value").text(n(this).text()),s.val(e),s.trigger("change"))}),n(document).on("click touchstart",function(e){0==n(e.target).closest(l).length&&l.removeClass(i)}),s.hide().after(l)})}}(jQuery);